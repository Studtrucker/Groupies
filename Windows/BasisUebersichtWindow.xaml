<Window x:Class="BasisUebersichtWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Groupies"
        mc:Ignorable="d"
        xmlns:convert="clr-namespace:Groupies.Converters"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        Width="Auto" MaxHeight="800" Height="600" MinWidth="800"
        Title="{Binding WindowTitleText}" Icon="{Binding WindowTitleIcon}">
    
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding UebersichtWindowLoadedCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    
    <Window.Resources>
        <convert:InvertableBoolToVisibleConverter Inverted="True" x:Key="BooleanToVisibilityInverted"/>
        <convert:StringToLeistungsstufeConverter x:Key="StringToLeistungsstufeConverter"/>

        <!--Data Template Trainer-->
        <DataTemplate DataType="{x:Type local:TrainerViewModel}">
            <DockPanel>

                <!--Objektliste-->
                <DataGrid CanUserAddRows="False" CanUserSortColumns="True"  IsReadOnly="True"
                          AutoGenerateColumns="False"
                          ItemsSource="{Binding ItemsView}"
                          SelectedItem="{Binding SelectedItem}" 
                          local:DataGridScrollBehavior.AutoScrollIntoView="True">
 
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Sorting">
                            <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                                       
                    <DataGrid.Columns >
                        <DataGridTextColumn Header="Alias" Binding="{Binding Alias}" SortMemberPath="Alias" Width="Auto"/>
                        <DataGridTextColumn Header="Vorname" Binding="{Binding Vorname}" SortMemberPath="Vorname" Width="Auto"/>
                        <DataGridTextColumn Header="Nachname" Binding="{Binding Nachname}" SortMemberPath="Nachname" Width="Auto"/>
                    </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>


                <!-- Detailansicht-->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="190"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Grid.Column="2"
                            HorizontalAlignment="Left" Margin="5"
                            BorderBrush="Gray" BorderThickness="1">
                        <Grid Height="180">
                            <Rectangle Fill="Transparent"/>
                            <Image VerticalAlignment="Center" Source="/Images/icons8-trainer-96.png"  Opacity="0.3"
                                   Visibility="{Binding SelectedItem.HatFoto,Converter={StaticResource BooleanToVisibilityInverted}}"/>
                            <Image x:Name="FotoImage" Height="180" Source="{Binding SelectedItem.Foto}"/>
                        </Grid>
                    </Border>

                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Trainer ID
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Alias
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="3" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Vorname
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    <Label Content="Nachname" Grid.Column="1" Grid.Row="4"/>
                    <Label Content="Telefon" Grid.Column="1" Grid.Row="5"/>
                    <Label Content="e-Mail" Grid.Column="1" Grid.Row="6"/>


                    <TextBox Grid.Column="2" Grid.Row="1" IsReadOnly="True" 
                             Text="{Binding SelectedItem.TrainerID}" />

                    <TextBox Grid.Column="2" Grid.Row="2" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Alias}"/>

                    <TextBox Grid.Column="2" Grid.Row="3" IsReadOnly="True"                           
                             Text="{Binding SelectedItem.Vorname}"/>

                    <TextBox Grid.Column="2" Grid.Row="4" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Nachname}" />

                    <TextBox Grid.Column="2" Grid.Row="5" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Telefonnummer}" />

                    <TextBox Grid.Column="2" Grid.Row="6" IsReadOnly="True" 
                             Text="{Binding SelectedItem.EMail}" />
                
                </Grid>
            </DockPanel>

        </DataTemplate>

        <!--Data Template Teilnehmer-->
        <DataTemplate DataType="{x:Type local:TeilnehmerViewModel}">
            <DockPanel>

                    <!--Objektliste-->
                    <DataGrid Grid.Row="0" CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True"
                              AutoGenerateColumns="False"
                              IsSynchronizedWithCurrentItem="True"
                              ItemsSource="{Binding ItemsView}"
                              SelectedItem="{Binding SelectedItem}"        
                              local:DataGridScrollBehavior.AutoScrollIntoView="True">

                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Sorting">
                                <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>

                        <DataGrid.Columns >
                            <DataGridTextColumn Header="Vorname" Binding="{Binding Vorname}" Width="Auto" SortMemberPath="Vorname"/>
                            <DataGridTextColumn Header="Nachname" Binding="{Binding Nachname}" Width="Auto" SortMemberPath="Nachname"/>
                            <DataGridTextColumn Header="Alter" Binding="{Binding Alter}" Width="Auto" SortMemberPath="Alter"/>
                            <DataGridTextColumn Header="Leistungsstufe" Binding="{Binding Leistungsstufe}"  SortMemberPath="Leistungsstufe.Benennung"/>
                        </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!-- Detailansicht-->
                <Grid Grid.Column="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition x:Name="CaptionColumn" Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!--Info Anzahl Teilnehmer-->
                    <TextBlock Grid.Column="2" Grid.Row="0" Text="{Binding AktuelleAnzahlObjekte}" DockPanel.Dock="Top" Margin="5,0,0,20" FontWeight="DemiBold"/>
                    
                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Teilnehmer ID <Run Foreground="Red">*</Run></TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Vorname <Run Foreground="Red">*</Run></TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="3" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Nachname <Run Foreground="Red">*</Run></TextBlock>
                    </Label>
                    <Label Content="Telefon" Grid.Column="1" Grid.Row="4"/>
                    <Label Content="Geburtsdatum" Grid.Column="1" Grid.Row="5"/>
                    <Label Content="Alter" Grid.Column="1" Grid.Row="6"/>
                    <Label Grid.Column="1" Grid.Row="7" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Leistungsstufe <Run Foreground="Red">*</Run></TextBlock>
                    </Label>

                    <TextBox Grid.Column="2" Grid.Row="1" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Ident}"/>
                    
                    <TextBox Grid.Column="2" Grid.Row="2" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Vorname}"/>
                    
                    <TextBox Grid.Column="2" Grid.Row="3" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Nachname}"/>

                    <TextBox Grid.Column="2" Grid.Row="4" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Telefonnummer}"/>

                    <DatePicker  Grid.Column="2" Grid.Row="5" Width="150" HorizontalAlignment="Left"
                                SelectedDate="{Binding SelectedItem.Geburtsdatum}"/>
                    
                    <TextBox Grid.Column="2" Grid.Row="6" Width="75" HorizontalAlignment="Left" IsReadOnly="True"
                             Text="{Binding SelectedItem.Alter,Mode=OneWay}" />
                    
                    <TextBox Grid.Column="2" Grid.Row="7" IsReadOnly="True"
                             Text="{Binding SelectedItem.Leistungsstufe.Benennung}" />

                    <!--<ComboBox Grid.Column="2" Grid.Row="7" IsReadOnly="True" 
                              SelectedValuePath="Benennung"
                              ItemsSource="{Binding LeistungsstufenListCollectionView}"
                              SelectedValue="{Binding SelectedItem.Leistungsstand, Converter={StaticResource StringToLeistungsstufeConverter}}"/>-->

                </Grid>
            </DockPanel>

        </DataTemplate>
        
        <!--Data Template Gruppe-->
        <DataTemplate DataType="{x:Type local:GruppeViewModel}">
            <DockPanel>
 
                <!--Objektliste-->
                <DataGrid Grid.Column="0" CanUserAddRows="False" CanUserDeleteRows="False"
                          AutoGenerateColumns="False"
                          ItemsSource="{Binding ItemsView}"
                          SelectedItem="{Binding SelectedItem}" IsReadOnly="True"
                          local:DataGridScrollBehavior.AutoScrollIntoView="True">
                    
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Sorting">
                            <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>

                    <DataGrid.Columns >
                        <DataGridTextColumn Header="Sortierung" Binding="{Binding Sortierung}" SortMemberPath="Sortierung" Width="Auto"/>
                        <DataGridTextColumn Header="Benennung" Binding="{Binding Benennung}" SortMemberPath="AusgabeTeilnehmerinfo" Width="Auto"/>
                        <DataGridTextColumn Header="Leistungsstufe" Binding="{Binding Leistungsstufe}" SortMemberPath="Leistungsstufe.Benennung" Width="Auto"/>
                    </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!-- Detailansicht-->
                <Grid Grid.Column="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!--Labels-->
                    <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Gruppen ID
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Sortierung
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Benennung
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>


                    <Label Grid.Column="1" Grid.Row="3" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Leistungsstufe
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <!--Felder-->
                    <TextBox Grid.Column="2" Grid.Row="0" IsReadOnly="True" 
                             Text="{Binding SelectedItem.Ident}"/>

                    <TextBox Grid.Column="2" Grid.Row="1" IsReadOnly="True"
                             Text="{Binding SelectedItem.Sortierung}"/>

                    <TextBox Grid.Column="2" Grid.Row="2"  IsReadOnly="True"
                             Text="{Binding SelectedItem.Benennung}" />

                    <!--<ComboBox Grid.Column="2" Grid.Row="3" 
                              SelectedValuePath="Benennung"
                              ItemsSource="{Binding LeistungsstufenListCollectionView}"
                              SelectedValue="{Binding SelectedItem.Leistungsstufe, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True, Converter={StaticResource StringToLeistungsstufeConverter}}"/>-->
                    <TextBox Grid.Column="2" Grid.Row="3"  IsReadOnly="True"
                             Text="{Binding SelectedItem.Leistungsstufe.Benennung}" />

                </Grid>
            </DockPanel>
        </DataTemplate>

        <!--Data Template Einteilung-->
        <DataTemplate DataType="{x:Type local:EinteilungViewModel}">
            <DockPanel>
                               
                <!--Objektliste-->
                <DataGrid CanUserAddRows="False" 
                          CanUserDeleteRows="False" 
                          DockPanel.Dock="Left"
                          AutoGenerateColumns="False"
                          ItemsSource="{Binding ItemsView}"
                          SelectedItem="{Binding SelectedItem}" 
                          IsReadOnly="True"
                          local:DataGridScrollBehavior.AutoScrollIntoView="True">

                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Sorting">
                            <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>

                    <DataGrid.Columns >
                        <DataGridTextColumn Header="Sortierung" Binding="{Binding Sortierung}" SortMemberPath="Sortierung" Width="Auto"/>
                        <DataGridTextColumn Header="Benennung" Binding="{Binding Benennung}" SortMemberPath="Benennung" Width="Auto"/>
                    </DataGrid.Columns>

                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon> 
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                                <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                    <MenuItem.Icon>
                                        <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!-- Detailansicht-->
                <Grid >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!--Labels-->
                    <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Einteilung ID
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Sortierung
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Benennung
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                                       
                       <!--Felder-->
                    <TextBox Grid.Column="2" Grid.Row="0" IsReadOnly="True"
                             Text="{Binding SelectedItem.Ident}"/>

                    <TextBox Grid.Column="2" Grid.Row="1" IsReadOnly="True"
                             Text="{Binding SelectedItem.Sortierung}"/>

                    <TextBox Grid.Column="2" Grid.Row="2" IsReadOnly="True"
                             Text="{Binding SelectedItem.Benennung}"/>

                </Grid>
            </DockPanel>
        </DataTemplate>

        <!--Data Template Leistungsstufe-->
        <DataTemplate DataType="{x:Type local:LeistungsstufeViewModel}">
            <DockPanel>

                <!--Objektliste-->
                <DataGrid Grid.Column="0" CanUserAddRows="False" CanUserDeleteRows="False" DockPanel.Dock="Left"
                          AutoGenerateColumns="False" IsReadOnly="True"
                          ItemsSource="{Binding ItemsView}"
                          SelectedItem="{Binding SelectedItem}"
                          local:DataGridScrollBehavior.AutoScrollIntoView="True">
                    
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Sorting">
                            <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    
                    <DataGrid.Columns >
                        <DataGridTextColumn Header="Sortierung" Binding="{Binding Sortierung}" SortMemberPath="Sortierung" Width="Auto"/>
                        <DataGridTextColumn Header="Benennung" Binding="{Binding Benennung}" SortMemberPath="Benennung" Width="Auto"/>
                    </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!-- Detailansicht-->
                <Grid >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!--Labels-->
                    <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Leistungsstufe ID
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    
                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Sortierung
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    
                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Benennung
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    
                    <Label Grid.Column="1" Grid.Row="3" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock>Beschreibung</TextBlock>
                    </Label>
                    
                    <Label Grid.Column="1" Grid.Row="4" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Fähigkeiten
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="3" Content="Auswahl Fähigkeiten">
                        
                    </Label>

                        <!--Felder-->
                    <TextBox Grid.Column="2" Grid.Row="0" IsReadOnly="True"
                             Text="{Binding SelectedItem.Ident}"/>

                    <TextBox Grid.Column="2" Grid.Row="1"  IsReadOnly="True"
                             Text="{Binding SelectedItem.Sortierung}"/>

                    <TextBox Grid.Column="2" Grid.Row="2" IsReadOnly="True" 
                              Text="{Binding SelectedItem.Benennung}"/>


                    <TextBox Grid.Column="2" Grid.Row="3" IsReadOnly="True"
                             Text="{Binding SelectedItem.Beschreibung}"
                             Style="{StaticResource BeschreibungTextBoxStyle}"/>

                    <DataGrid x:Name="FaehigkeitenDataGrid"
                              AutoGenerateColumns="False" IsReadOnly="True"
                              ItemsSource="{Binding SelectedItem.Faehigkeiten}"
                              CanUserAddRows="False"
                              Grid.Column="2" Grid.Row="4">
                        <!--<DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Height" Value="Auto"/>
                            </Style>
                        </DataGrid.RowStyle>-->
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nr" Binding="{Binding Sortierung}" Width="Auto" />
                            <DataGridTextColumn Header="Fähigkeit" Binding="{Binding Benennung}" Width="Auto" >
                                <!--<DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextBlock.TextTrimming" Value="WordEllipsis"/>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>-->
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Beschreibung" Binding="{Binding Beschreibung}" Width="*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextBlock.TextTrimming" Value="WordEllipsis"/>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    
                    <DataGrid Grid.Column="3" Grid.Row="1" Grid.RowSpan="4"
                              AutoGenerateColumns="False" IsReadOnly="True"
                              ItemsSource="{Binding AuswahlFaehigkeiten}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nr" Binding="{Binding Sortierung}" Width="Auto"/>
                            <DataGridTextColumn Header="Benennung" Binding="{Binding Benennung}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
                <!--</DockPanel>-->
            </DockPanel>
        </DataTemplate>

        <!--Data Template Faehigkeit-->
        <DataTemplate DataType="{x:Type local:FaehigkeitViewModel}">
            <DockPanel LastChildFill="True">

                <!--Objektliste-->
                <DataGrid CanUserAddRows="False" 
                          CanUserDeleteRows="False" 
                          DockPanel.Dock="Left"
                          AutoGenerateColumns="False"
                          ItemsSource="{Binding ItemsView}"
                          SelectedItem="{Binding SelectedItem}" 
                          IsReadOnly="True"
                          local:DataGridScrollBehavior.AutoScrollIntoView="True">

                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Sorting">
                            <i:InvokeCommandAction Command="{Binding DataGridSortingCommand}"  PassEventArgsToCommand="True"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>

                    <DataGrid.Columns >
                        <DataGridTextColumn Header="Nr" Binding="{Binding Sortierung}" SortMemberPath="Sortierung" Width="Auto"/>
                        <DataGridTextColumn Header="Benennung" Binding="{Binding Benennung}" SortMemberPath="Benennung"/>
                    </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                            <MenuItem Header="Erstellen" Command="{Binding NeuCommand}">
                                <MenuItem.Icon>
                                    <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Bearbeiten" Command="{Binding BearbeitenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Löschen" Command="{Binding LoeschenCommand}">
                                <MenuItem.Icon>
                                    <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!-- Detailansicht-->
                <Grid >
                    
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" MinWidth="405"/>
                        <ColumnDefinition Style="{StaticResource RandColumnDefinition}"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!--Labels-->
                    <Label Grid.Column="1" Grid.Row="0" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Fähigkeit ID
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>
                    <Label Grid.Column="1" Grid.Row="1" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Sortierung
                    <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="1" Grid.Row="2" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Benennung
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>

                    <Label Grid.Column="1" Grid.Row="3" Style="{StaticResource PflichtangabeLabel}">
                        <TextBlock >Beschreibung
                            <Run Foreground="Red">*</Run>
                        </TextBlock>
                    </Label>



                    <!--Felder-->
                    <TextBox Grid.Column="2" Grid.Row="0" IsReadOnly="True"
                             Text="{Binding SelectedItem.FaehigkeitID}"/>
                    
                    <TextBox Grid.Column="2" Grid.Row="1" IsReadOnly="True"
                             Text="{Binding SelectedItem.Sortierung}"/>

                    <TextBox Grid.Column="2" Grid.Row="2" IsReadOnly="True"
                             Text="{Binding SelectedItem.Benennung}"/>

                    <TextBox Grid.Column="2" Grid.Row="3" IsReadOnly="True"
                             Style="{StaticResource BeschreibungTextBoxStyle}"
                             Text="{Binding SelectedItem.Beschreibung}"/>

                </Grid>
                
            </DockPanel>
        </DataTemplate>

    </Window.Resources>
    
    <DockPanel>
        <!--Menuleiste-->
        <Menu DockPanel.Dock="Top" BorderThickness="1" BorderBrush="LightSlateGray">

            <MenuItem  Header="Fenster">
                <MenuItem Header="Schliessen" Command="{Binding CloseCommand}" />
            </MenuItem>

            <MenuItem  Header="{Binding ModelMenuItemText}">
                <MenuItem Header="Erstellen"  Command="{Binding AktuellesViewModel.NeuCommand}">
                    <MenuItem.Icon>
                        <Image Source= "pack://application:,,,/Images/icons8-create-48.png"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Bearbeiten"  Command="{Binding AktuellesViewModel.BearbeitenCommand}">
                    <MenuItem.Icon>
                        <Image Source="pack://application:,,,/Images/icons8-pencil-48.png"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Löschen"  Command="{Binding AktuellesViewModel.LoeschenCommand}">
                    <MenuItem.Icon>
                        <Image Source="pack://application:,,,/Images/icons8-remove-48.png"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem  Header="Transfer">
                <MenuItem Header="Tag 1" Command="{Binding TransferToCommand}"  CommandParameter="{Binding Ident}"/>
                <MenuItem Header="Mittwoch" Command="{Binding TransferToCommand}"  CommandParameter="{Binding Ident}"/>
                <MenuItem Header="Donnerstag" Command="{Binding TransferToCommand}" CommandParameter="{Binding Ident}"/>
            </MenuItem>
        </Menu>

        <!--Überschrift-->
        <DockPanel DockPanel.Dock="Top" Margin="10">
            <Image Source="{Binding WindowHeaderImage}" Style="{StaticResource WindowImageCaption}" />
            <TextBlock Text="{Binding UebersichtWindowHeaderText}" Style="{StaticResource WindowCaption}" />
        </DockPanel>
        
        <!--Buttons-->
        <Border DockPanel.Dock="Bottom" Margin="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Label x:Name="FehlerInfoLabel" Content="{Binding (Validation.ValidationAdornerSiteFor).(Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=Self}}" />
                <Button x:Name="ZurueckButton" Width="35" Command="{Binding AktuellesViewModel.MovePreviousCommand}" >
                    <Image Source="/Images/icons8-back-48.png"/>
                </Button>
                <Button x:Name="VorButton" Width="35" Command="{Binding AktuellesViewModel.MoveNextCommand}" >
                    <Image Source="/Images/icons8-next-48.png"/>
                </Button>
                <Button x:Name="CloseButton" Width="110" Content="Schliessen"  Command="{Binding CloseCommand}" Visibility="{Binding CloseButtonVisibility}"/>
            </StackPanel>
        </Border>

        <!--Liste und Detailfeld-->
        <ContentControl  Content="{Binding AktuellesViewModel}" Margin="20,10" />
        
    </DockPanel>
    
</Window>
